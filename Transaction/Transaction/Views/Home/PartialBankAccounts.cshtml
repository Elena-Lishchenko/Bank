@model Transaction.ViewModel.BankViewModel

@{
	ViewBag.Title = "Accounts";
}

@section Scripts
{
	@Scripts.Render("~/bundles/transactionScript")
}

<h3>@Model.Name</h3>
@if (Model.Accounts.Count > 0)
{
	@Html.HiddenFor(m=>m.Id,new { id="bankId"})
	<div class="row">
		<div class="col-md-4">
			<p>
				<table id="transactions_table" class="display h4 cell-border">
					<thead>
						<tr>
							<th>AccountId</th>
							<th>AccountType</th>
							<th>Balance</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var account in Model.Accounts)
						{
							<tr>
								<td>@account.Id</td>
								<td>@account.AccountType.Name</td>
								<td>@account.Balance</td>
							</tr>
						}
					</tbody>
				</table>
			</p>
			<button id="btnSave" href="#transaction" rel="modal:open">Create Transaction</button>
		</div>
	</div>
	<div id="transaction-modal" class="modal modal-content">
		<h5 class="modal-title">Create transaction</h5>
		<div id="modal-body" class="modal-body">
			<select id="selectBank" class="form-control"></select>
			<button id="selectBtn" class="btn btn-outline-primary btn-lg">Get Accounts</button>
			<table id="table_modal" class="display h4 cell-border">
				<thead>
					<tr>
						<th>AccountId</th>
						<th>AccountType</th>
						<th>Balance</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
			<div id="sumGroup">
				<span class="input-group-text">Summa</span>
				<input id="sum" type="text" class="form-control" />
				<button id="saveBtn" type="button" class="btn btn-primary">Save changes</button>
			</div>
		</div>
		<div class="modal-footer">
			<a href="#" rel="modal:close">Close</a>
		</div>
		<div id="result"></div>
	</div>
}
